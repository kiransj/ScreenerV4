<template>
    <div>
        <div class="row">
            <div class="col-sm-6 input-group input-group-lg">
                <div class="input-group-prepend"><span class="input-group-text" id="basic-addon1">@</span></div>
                <input type="text" class="form-control" placeholder="Search for Symbol,Marketcap, Qty, 52 Week HighLow etc"v-model="searchQuery" v-on:keyup="onSearch">
            </div>
            <div class="col-sm-6">

            </div>
        </div>
        <div class="row"  style="overflow: scroll; overflow-x: auto; height: 85vh; padding-top: 5px" >
            <table class="table table-striped table-bordered table-hover table-fixed" >
                <thead  class="thead-dark">
                    <tr>
                        <th scope="col">Index</th>
                        <th scope="col" v-on:click="sortBy('symbol')"><span style="color: white; font-size: 25px;">&#x21C5</span>SYM</th>
                        <th scope="col" v-on:click="sortBy('close')"><span style="color: white; font-size: 25px;">&#x21C5</span>LTP</th>
                        <th scope="col" v-on:click="sortBy('change')"><span style="color: white; font-size: 25px;">&#x21C5</span>Chg</th>
                        <th scope="col">DQ </th>
                        <th scope="col" v-on:click="sortBy('delQtyChange')"><span style="color: white; font-size: 25px;">&#x21C5</span>DQChg</th>
                        <th scope="col">52H</th>
                        <th scope="col">52L</th>
                        <th scope="col" v-on:click="sortBy('hlp')"><span style="color: white; font-size: 25px;">&#x21C5</span>HLP</th>
                        <th scope="col">MarketCap</th>
                        <th scope="col" v-on:click="sortBy('change5d')"><span style="color: white; font-size: 25px;">&#x21C5</span>5D</th>
                        <th scope="col" v-on:click="sortBy('change30d')"><span style="color: white; font-size: 25px;">&#x21C5</span>30D</th>
                        <th scope="col" v-on:click="sortBy('upDown')"><span style="color: white; font-size: 25px;">&#x21C5</span>UD</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="background-color: white" v-if="stockReport.length > elementsPerPage">
                        <td>{{stockReport.length}}</td>
                        <td><button class="LinkButton" v-on:click="showAll()">Show {{elementsPerPage > 100 ? 'less' : 'All'}}</button></td>
                        <td><button v-if="startIndex+elementsPerPage < stockReport.length" class="LinkButton" v-on:click="ShowElements(true)">Show More</button></td>
                        <td><button class="LinkButton" v-on:click="ShowElements(false)" v-if="startIndex > 0 && elementsPerPage < 100">Show Less</button></td>
                    </tr>
                    <tr v-for="(item, index) in stockReport.slice(startIndex)" v-if="index < elementsPerPage">
                        <td>{{index+startIndex+1}}</td>
                        <td><router-link v-bind:to='/history/+item.symbol'> {{item.symbol}} </router-link></td>
                        <td>{{item.close}}</td>
                        <td><font v-bind:color="item.change > 0 ? 'Green':'Red'">{{item.change}}</font></td>
                        <td>{{item.totDelQty}}</td>
                        <td>{{item.delQtyChange}}</td>
                        <td>{{item.high52week}}</td>
                        <td>{{item.low52week}}</td>
                        <td>{{item.hlp}}</td>
                        <td></td>
                        <td><font v-bind:color="item.change5d > 0 ? 'Green':'Red'">{{item.change5d}}</font></td>
                        <td><font v-bind:color="item.change30d > 0 ? 'Green':'Red'">{{item.change30d}}</font></td>
                        <td>#{{item.upDown}}</td>
                    </tr>
                    <tr style="background-color: white" v-if="stockReport.length > elementsPerPage">
                        <td></td>
                        <td><button v-if="startIndex+elementsPerPage < stockReport.length" class="LinkButton" v-on:click="ShowElements(true)">Show More</button></td>
                        <td><button class="LinkButton" v-on:click="ShowElements(false)" v-if="startIndex > 0">Show Less</button></td>
                    </tr>
                </tbody>
            </table>

        </div>
    </div>
</template>

<script src="./EquityReport.ts"></script>
