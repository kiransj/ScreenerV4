<template>
    <div>
        <div class="input-group input-group-lg">
            <div class="input-group-prepend">

            </div>
            <input type="text" class="form-control" placeholder="Search for Symbol,Marketcap, Qty, 52 Week HighLow etc"
                   v-model="searchQuery" v-on:keyup="onSearch">
        </div>
        <div class="row"  style="overflow: scroll; overflow-x: auto; height: 85vh; padding-top: 5px" >
            <table class="table table-striped table-bordered table-hover table-fixed" >
                <thead  class="thead-dark">
                    <tr>
                        <th scope="col">Index</th>
                        <th scope="col" v-on:click="sortBy('symbol')"><span style="color: white; font-size: 25px;">&#x21C5</span>Symbol</th>
                        <th scope="col">Price</th>
                        <th scope="col">Change</th>
                        <th scope="col">DeliveredQ </th>
                        <th scope="col">TradedQ</th>
                        <th scope="col">TradedV</th>
                        <th scope="col">52H</th>
                        <th scope="col">52L</th>
                        <th scope="col">MarketCap</th>
                        <th scope="col">5D</th>
                        <th scope="col">30D</th>
                        <th scope="col">This Year</th>
                        <th scope="col" v-on:click="sortBy('upDown')"><span style="color: white; font-size: 25px;">&#x21C5</span>UpDown</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="background-color: white">
                        <td><button class="LinkButton" v-on:click="showAll()">Show {{elementsPerPage > 100 ? 'less' : 'All'}}</button></td>
                        <td><button v-if="startIndex+elementsPerPage < stockReport.length" class="LinkButton" v-on:click="ShowElements(true)">Show More</button></td>
                        <td><button class="LinkButton" v-on:click="ShowElements(false)" v-if="startIndex > 0 && elementsPerPage < 100">Show Less</button></td>
                    </tr>
                    <tr v-for="(item, index) in stockReport.slice(startIndex)" v-if="index < elementsPerPage">
                        <td>{{index+startIndex+1}}</td>
                        <td><router-link v-bind:to='/history/+item.symbol'> {{item.symbol}} </router-link></td>
                        <td>{{item.close}}</td>
                        <td><font v-bind:color="item.change > 0 ? 'Green':'Red'">{{item.change}}</font></td>
                        <td>{{item.totDelQty}}</td>
                        <td>{{item.totQty}}</td>
                        <td>{{item.totTraVal}}</td>
                        <td>{{item.high52week}}</td>
                        <td>{{item.low52week}}</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>#{{item.upDown}}</td>
                    </tr>
                    <tr style="background-color: white">
                        <td></td>
                        <td><button v-if="startIndex+elementsPerPage < stockReport.length" class="LinkButton" v-on:click="ShowElements(true)">Show More</button></td>
                        <td><button class="LinkButton" v-on:click="ShowElements(false)" v-if="startIndex > 0">Show Less</button></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</template>

<script src="./EquityReport.ts"></script>
